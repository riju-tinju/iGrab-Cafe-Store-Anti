
<%- include('../partials/Header') %>
<!-- 500 Internal Server Error Page Main Content -->
<main class="main-container mt-20 lg:mt-24 pb-20 lg:pb-10 px-4 lg:px-8">
  <!-- 500 Error Section -->
  <section class="min-h-[60vh] flex items-center justify-center">
    <div class="text-center max-w-2xl mx-auto">
      <!-- Large 500 Number with Steam Animation -->
      <div class="mb-8 relative">
        <h1 class="text-8xl lg:text-9xl font-bold text-primary opacity-20 mb-4">500</h1>
        <div class="relative -mt-16 lg:-mt-20">
          <i class="fas fa-exclamation-triangle text-6xl lg:text-7xl text-red-500"></i>
          <!-- Steam Animation -->
          <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
            <div class="steam-1"></div>
            <div class="steam-2"></div>
            <div class="steam-3"></div>
          </div>
        </div>
      </div>
      
      <!-- Error Message -->
      <div class="mb-8">
        <h2 class="text-2xl lg:text-3xl font-bold mb-4 text-red-600">Oops! Something Went Wrong</h2>
        <p class="text-gray-600 text-lg mb-6 leading-relaxed">
          Our coffee machine seems to be having a technical hiccup! We're experiencing some server issues right now.
        </p>
        <p class="text-gray-500 mb-4">
          Don't worry - our tech team is already working on fixing this issue. Please try again in a few moments.
        </p>
        <!-- Error Code Display -->
        <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
          <p class="text-red-700 font-medium">
            <i class="fas fa-info-circle mr-2"></i>
            Error Code: 500 - Internal Server Error
          </p>
        </div>
      </div>
      
      <!-- Action Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12">
        <button onclick="window.location.reload()" class="btn-primary flex items-center">
          <i class="fas fa-redo-alt mr-2"></i>
          Try Again
        </button>
        <button onclick="window.history.back()" class="btn-secondary flex items-center">
          <i class="fas fa-arrow-left mr-2"></i>
          Go Back
        </button>
        <a href="/" class="btn-primary flex items-center bg-accent hover:bg-opacity-80">
          <i class="fas fa-home mr-2"></i>
          Safe Home
        </a>
      </div>
      
      <!-- Status Information -->
      <div class="bg-white rounded-xl p-6 shadow-sm">
        <h3 class="text-xl font-bold mb-4 text-primary">What can you do?</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <div class="flex items-start space-x-3">
            <i class="fas fa-clock text-accent text-xl mt-1"></i>
            <div>
              <h4 class="font-medium mb-1">Wait a moment</h4>
              <p class="text-gray-600 text-sm">The issue might resolve itself in a few minutes</p>
            </div>
          </div>
          <div class="flex items-start space-x-3">
            <i class="fas fa-refresh text-accent text-xl mt-1"></i>
            <div>
              <h4 class="font-medium mb-1">Refresh the page</h4>
              <p class="text-gray-600 text-sm">Sometimes a simple refresh can fix the issue</p>
            </div>
          </div>
          <div class="flex items-start space-x-3">
            <i class="fas fa-phone text-accent text-xl mt-1"></i>
            <div>
              <h4 class="font-medium mb-1">Contact us</h4>
              <p class="text-gray-600 text-sm">If the problem persists, let us know</p>
            </div>
          </div>
          <div class="flex items-start space-x-3">
            <i class="fas fa-mobile-alt text-accent text-xl mt-1"></i>
            <div>
              <h4 class="font-medium mb-1">Try our app</h4>
              <p class="text-gray-600 text-sm">Our mobile app might be working fine</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Alternative Options -->
  <section class="mt-16">
    <div class="text-center mb-8">
      <h2 class="text-2xl lg:text-3xl font-bold mb-4">While We Fix This, Try <span class="text-accent">Alternative Options</span></h2>
      <p class="text-gray-600">Don't let technical issues stop you from enjoying our services!</p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <!-- Option 1: Call Us -->
      <div class="bg-white rounded-xl p-6 shadow-sm text-center group hover:shadow-md transition-all duration-300">
        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center text-white text-2xl mx-auto mb-4 group-hover:bg-accent transition-colors duration-300">
          <i class="fas fa-phone"></i>
        </div>
        <h3 class="font-bold mb-2">Call Us Directly</h3>
        <p class="text-gray-600 text-sm mb-4">Place your order over the phone</p>
        <a href="tel:+971-xxx-xxx-xxx" class="btn-primary w-full">Call Now</a>
      </div>
      
      <!-- Option 2: Visit Store -->
      <div class="bg-white rounded-xl p-6 shadow-sm text-center group hover:shadow-md transition-all duration-300">
        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center text-white text-2xl mx-auto mb-4 group-hover:bg-accent transition-colors duration-300">
          <i class="fas fa-map-marker-alt"></i>
        </div>
        <h3 class="font-bold mb-2">Visit Our Cafe</h3>
        <p class="text-gray-600 text-sm mb-4">Come experience our atmosphere in person</p>
        <a href="/contact" class="btn-primary w-full">Get Directions</a>
      </div>
      
      <!-- Option 3: Social Media -->
      <div class="bg-white rounded-xl p-6 shadow-sm text-center group hover:shadow-md transition-all duration-300">
        <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center text-white text-2xl mx-auto mb-4 group-hover:bg-accent transition-colors duration-300">
          <i class="fas fa-heart"></i>
        </div>
        <h3 class="font-bold mb-2">Follow Us</h3>
        <p class="text-gray-600 text-sm mb-4">Stay updated on Instagram & WhatsApp</p>
        <div class="flex gap-2">
          <a href="#" class="btn-secondary flex-1">Instagram</a>
          <a href="#" class="btn-secondary flex-1">WhatsApp</a>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Technical Support Section -->
  <section class="mt-16 bg-gray-50 rounded-2xl p-8">
    <div class="max-w-md mx-auto text-center">
      <i class="fas fa-tools text-4xl text-primary mb-4"></i>
      <h3 class="text-xl font-bold mb-4">Technical Support</h3>
      <p class="text-gray-700 mb-6">
        If this error continues to occur, please report it to our technical team with the timestamp below:
      </p>
      
      <!-- Error Details -->
      <div class="bg-white rounded-lg p-4 mb-6 text-left">
        <div class="text-sm text-gray-600">
          <p><strong>Error:</strong> 500 Internal Server Error</p>
          <p><strong>Time:</strong> <span id="error-timestamp"></span></p>
          <p><strong>Page:</strong> <span id="current-url"></span></p>
        </div>
      </div>
      
      <div class="flex flex-col sm:flex-row gap-3 justify-center">
        <a href="/contact" class="btn-primary">Report Issue</a>
        <button onclick="copyErrorDetails()" class="btn-secondary">Copy Details</button>
      </div>
    </div>
  </section>
</main>

<style>
/* Steam Animation Styles */
.steam-1, .steam-2, .steam-3 {
  position: absolute;
  width: 6px;
  height: 20px;
  background: linear-gradient(to top, rgba(255,255,255,0.8), transparent);
  border-radius: 50%;
  animation: steam 2s ease-in-out infinite;
}

.steam-1 {
  left: -8px;
  animation-delay: 0s;
}

.steam-2 {
  left: 0px;
  animation-delay: 0.5s;
}

.steam-3 {
  left: 8px;
  animation-delay: 1s;
}

@keyframes steam {
  0% {
    opacity: 0;
    transform: translateY(0) scale(1);
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
    transform: translateY(-30px) scale(1.5);
  }
}

/* Error Page Animations */
.shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

.pulse-red {
  animation: pulseRed 2s ease-in-out infinite;
}

@keyframes pulseRed {
  0%, 100% { 
    color: #dc2626;
  }
  50% { 
    color: #ef4444;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Set current timestamp
  const now = new Date();
  document.getElementById('error-timestamp').textContent = now.toLocaleString();
  
  // Set current URL
  document.getElementById('current-url').textContent = window.location.href;
  
  // Add shake animation to error icon
  const errorIcon = document.querySelector('.fa-exclamation-triangle');
  if (errorIcon) {
    errorIcon.classList.add('shake');
    setInterval(() => {
      errorIcon.classList.remove('shake');
      setTimeout(() => {
        errorIcon.classList.add('shake');
      }, 100);
    }, 5000);
  }
  
  // Add pulse animation to error heading
  const errorHeading = document.querySelector('h2');
  if (errorHeading) {
    errorHeading.classList.add('pulse-red');
  }
  
  // Auto-retry mechanism (optional)
  let retryCount = 0;
  const maxRetries = 3;
  
  function autoRetry() {
    if (retryCount < maxRetries) {
      retryCount++;
      setTimeout(() => {
        showToast(`Auto-retry attempt ${retryCount}...`);
        window.location.reload();
      }, 10000); // Retry after 10 seconds
    }
  }
  
  // Uncomment the line below if you want auto-retry functionality
  // autoRetry();
});

// Function to copy error details to clipboard
function copyErrorDetails() {
  const errorDetails = `
Error: 500 Internal Server Error
Time: ${document.getElementById('error-timestamp').textContent}
Page: ${document.getElementById('current-url').textContent}
User Agent: ${navigator.userAgent}
  `.trim();
  
  navigator.clipboard.writeText(errorDetails).then(() => {
    showToast('Error details copied to clipboard!');
  }).catch(() => {
    // Fallback for older browsers
    const textArea = document.createElement('textarea');
    textArea.value = errorDetails;
    document.body.appendChild(textArea);
    textArea.select();
    document.execCommand('copy');
    document.body.removeChild(textArea);
    showToast('Error details copied to clipboard!');
  });
}

// Add click feedback to buttons
const actionButtons = document.querySelectorAll('.btn-primary, .btn-secondary');
actionButtons.forEach(button => {
  button.addEventListener('click', function() {
    this.style.transform = 'scale(0.95)';
    setTimeout(() => {
      this.style.transform = '';
    }, 150);
  });
});
</script>

<%- include('../partials/Footer') %>