<%- include('../../partials/Header') %>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>iGrab Cafe - Settings Dashboard</title>
        <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    </head>

    <body class="bg-gray-100">
        <style>
            .brand-teal {
                background-color: #1E7065;
            }

            .brand-teal-light {
                background-color: #2F8A7B;
            }

            .brand-orange {
                background-color: #F59E0B;
            }

            .text-brand-teal {
                color: #1E7065;
            }

            .border-brand-teal {
                border-color: #1E7065;
            }

            .hover-brand-teal:hover {
                background-color: #1E7065;
            }

            .tab-button {
                transition: all 0.3s ease;
                border-bottom: 3px solid transparent;
            }

            .tab-button.active {
                border-bottom-color: #1E7065;
                background-color: #f0f9f7;
                color: #1E7065;
            }

            .tab-button:hover:not(.active) {
                background-color: #f9fafb;
            }

            .settings-card {
                transition: all 0.3s ease;
                border-left: 4px solid transparent;
            }

            .settings-card:hover {
                border-left-color: #1E7065;
                transform: translateY(-2px);
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            }

            .loading-spinner {
                border: 3px solid #f3f3f3;
                border-top: 3px solid #1E7065;
                border-radius: 50%;
                width: 20px;
                height: 20px;
                animation: spin 1s linear infinite;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }

                100% {
                    transform: rotate(360deg);
                }
            }

            .modal {
                display: none;
                position: fixed;
                z-index: 1000;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(4px);
            }

            .modal.show {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .modal-content {
                background-color: white;
                padding: 24px;
                border-radius: 12px;
                width: 90%;
                max-width: 600px;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            }

            .toggle-switch {
                position: relative;
                display: inline-block;
                width: 60px;
                height: 34px;
            }

            .toggle-switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }

            .toggle-slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                transition: .4s;
                border-radius: 34px;
            }

            .toggle-slider:before {
                position: absolute;
                content: "";
                height: 26px;
                width: 26px;
                left: 4px;
                bottom: 4px;
                background-color: white;
                transition: .4s;
                border-radius: 50%;
            }

            input:checked+.toggle-slider {
                background-color: #1E7065;
            }

            input:checked+.toggle-slider:before {
                transform: translateX(26px);
            }

            .file-upload-area {
                border: 2px dashed #cbd5e0;
                border-radius: 8px;
                padding: 20px;
                text-align: center;
                transition: all 0.3s ease;
                cursor: pointer;
            }

            .file-upload-area:hover {
                border-color: #1E7065;
                background-color: #f0f9f7;
            }

            .file-upload-area.has-file {
                border-color: #1E7065;
                background-color: #f0f9f7;
            }

            .toast {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 16px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 1001;
                transform: translateX(100%);
                transition: transform 0.3s ease;
            }

            .toast.show {
                transform: translateX(0);
            }

            .toast.success {
                background-color: #10b981;
            }

            .toast.error {
                background-color: #ef4444;
            }

            .toast.warning {
                background-color: #f59e0b;
            }

            .fade-in {
                animation: fadeIn 0.5s ease-in;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .status-badge {
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: 500;
            }

            .status-active {
                background-color: #10b981;
                color: white;
            }

            .status-disabled {
                background-color: #ef4444;
                color: white;
            }

            .day-schedule {
                border: 1px solid #e5e7eb;
                border-radius: 8px;
                padding: 12px;
                margin-bottom: 8px;
            }

            .day-schedule.closed {
                background-color: #f9fafb;
                color: #6b7280;
            }

            @media (max-width: 768px) {
                .modal-content {
                    width: 95%;
                    margin: 10px;
                    padding: 16px;
                }

                .tab-button {
                    font-size: 14px;
                    padding: 8px 12px;
                }
            }
        </style>

        <!-- Header Section -->
        <header class="brand-teal text-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-wrap justify-between items-center h-16">
                    <div class="flex items-center">
                        <button id="backBtn"
                            class="mr-4 p-2 rounded-lg hover:bg-white hover:bg-opacity-20 transition-colors">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h1 class="text-xl font-bold">Settings Dashboard</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm bg-white bg-opacity-20 px-3 py-1 rounded-full">
                            <i class="fas fa-cog mr-1"></i>System Configuration
                        </span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Tab Navigation -->
            <div class="bg-white rounded-lg shadow-sm border mb-8">
                <div class="overflow-x-auto">
                    <nav class="flex space-x-0" id="tabNavigation">
                        <button class="tab-button active px-4 py-4 font-medium text-sm whitespace-nowrap"
                            data-tab="business">
                            <i class="fas fa-building mr-2"></i>Business Info
                        </button>
                        <button class="tab-button px-4 py-4 font-medium text-sm whitespace-nowrap" data-tab="branches">
                            <i class="fas fa-store mr-2"></i>Branches
                        </button>
                        <button class="tab-button px-4 py-4 font-medium text-sm whitespace-nowrap" data-tab="payments">
                            <i class="fas fa-credit-card mr-2"></i>Payments
                        </button>
                        <button class="tab-button px-4 py-4 font-medium text-sm whitespace-nowrap" data-tab="seo">
                            <i class="fas fa-search mr-2"></i>SEO & Meta
                        </button>
                        <button class="tab-button px-4 py-4 font-medium text-sm whitespace-nowrap" data-tab="charges">
                            <i class="fas fa-receipt mr-2"></i>Charges
                        </button>
                        <button class="tab-button px-4 py-4 font-medium text-sm whitespace-nowrap" data-tab="system">
                            <i class="fas fa-info-circle mr-2"></i>System Info
                        </button>
                    </nav>
                </div>
            </div>

            <!-- Tab Content -->
            <div id="tabContent">
                <!-- Business Information Tab -->
                <div id="business-tab" class="tab-content">
                    <div class="settings-card bg-white rounded-lg shadow-sm border p-6 fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-900">Business Information</h2>
                            <button id="saveBusinessBtn"
                                class="brand-teal hover:brand-teal-light text-white px-6 py-2 rounded-lg font-medium transition-colors">
                                <i class="fas fa-save mr-2"></i>Save Changes
                            </button>
                        </div>

                        <form id="businessForm" class="space-y-6">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Business Details -->
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Business Name
                                            *</label>
                                        <input type="text" id="businessName" required
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="Enter business name">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Phone Number
                                            *</label>
                                        <input type="tel" id="businessPhone" required
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="+971 50 123 4567">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address
                                            *</label>
                                        <input type="email" id="businessEmail" required
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="info@igrab.com">
                                    </div>

                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Default
                                            Currency</label>
                                        <input type="text" value="AED" disabled
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-100 text-gray-600">
                                    </div>
                                </div>

                                <!-- Logo Upload -->
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Business
                                            Logo</label>
                                        <div class="file-upload-area" id="logoUploadArea">
                                            <input type="file" id="logoInput" accept="image/*" class="hidden">
                                            <div id="logoPreview" class="hidden">
                                                <img id="logoImage" class="max-w-32 max-h-32 mx-auto rounded-lg mb-3">
                                                <button type="button" class="text-red-600 hover:text-red-800 text-sm"
                                                    onclick="removeLogo()">
                                                    <i class="fas fa-trash mr-1"></i>Remove Logo
                                                </button>
                                            </div>
                                            <div id="logoPlaceholder">
                                                <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                                <p class="text-gray-600 font-medium">Click to upload logo</p>
                                                <p class="text-gray-500 text-sm">PNG, JPG up to 2MB</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- About Us -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">About Us</label>
                                <textarea id="businessAbout" rows="4"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                    placeholder="Brief description about your business..."></textarea>
                            </div>

                            <!-- Address -->
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-3">Business Address</label>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="md:col-span-2">
                                        <input type="text" id="addressStreet" placeholder="Street Address"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <input type="text" id="addressCity" placeholder="City"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                    </div>
                                    <div>
                                        <input type="text" id="addressCountry" placeholder="Country"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Branches Tab -->
                <div id="branches-tab" class="tab-content hidden">
                    <div class="settings-card bg-white rounded-lg shadow-sm border fade-in">
                        <div class="flex justify-between items-center p-6 border-b">
                            <h2 class="text-2xl font-bold text-gray-900">Store Branches</h2>
                            <button id="addBranchBtn"
                                class="brand-teal hover:brand-teal-light text-white px-6 py-2 rounded-lg font-medium transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add Branch
                            </button>
                        </div>

                        <!-- Branches List -->
                        <div id="branchesContainer" class="p-6">
                            <!-- Loading State -->
                            <div id="branchesLoading" class="hidden flex justify-center py-8">
                                <div class="loading-spinner"></div>
                            </div>

                            <!-- Branches will be populated here -->
                            <div id="branchesList"></div>
                        </div>
                    </div>
                </div>

                <!-- Payments Tab -->
                <div id="payments-tab" class="tab-content hidden">
                    <div class="settings-card bg-white rounded-lg shadow-sm border p-6 fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-900">Payment Integration</h2>
                            <button id="savePaymentBtn"
                                class="brand-teal hover:brand-teal-light text-white px-6 py-2 rounded-lg font-medium transition-colors">
                                <i class="fas fa-save mr-2"></i>Save Payment Settings
                            </button>
                        </div>

                        <div class="space-y-6">
                            <!-- Stripe Configuration -->
                            <div class="border rounded-lg p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <i class="fab fa-stripe text-2xl text-blue-600 mr-3"></i>
                                        <div>
                                            <h3 class="text-lg font-semibold text-gray-900">Stripe Payment Gateway</h3>
                                            <p class="text-sm text-gray-600">Configure Stripe for online payments</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span id="stripeStatus" class="status-badge status-disabled">Disabled</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="stripeToggle">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Publishable
                                            Key</label>
                                        <input type="text" id="stripePublishableKey"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="pk_test_...">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Secret Key</label>
                                        <input type="password" id="stripeSecretKey"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="sk_test_...">
                                    </div>
                                </div>
                            </div>

                            <!-- Cash on Delivery -->
                            <div class="border rounded-lg p-6">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i class="fas fa-money-bill-wave text-2xl text-green-600 mr-3"></i>
                                        <div>
                                            <h3 class="text-lg font-semibold text-gray-900">Cash on Delivery (COD)</h3>
                                            <p class="text-sm text-gray-600">Allow customers to pay with cash upon
                                                delivery</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span id="codStatus" class="status-badge status-active">Active</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" id="codToggle" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Wallet/Points (Future) -->
                            <div class="border rounded-lg p-6 bg-gray-50">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <i class="fas fa-wallet text-2xl text-purple-600 mr-3"></i>
                                        <div>
                                            <h3 class="text-lg font-semibold text-gray-700">Wallet / Points System</h3>
                                            <p class="text-sm text-gray-500">Coming soon - Digital wallet and loyalty
                                                points</p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="status-badge bg-gray-400 text-white">Coming Soon</span>
                                        <label class="toggle-switch">
                                            <input type="checkbox" disabled>
                                            <span class="toggle-slider bg-gray-300"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- SEO Tab -->
                <div id="seo-tab" class="tab-content hidden">
                    <div class="settings-card bg-white rounded-lg shadow-sm border p-6 fade-in">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-900">SEO & Metadata</h2>
                            <button id="saveSeoBtn"
                                class="brand-teal hover:brand-teal-light text-white px-6 py-2 rounded-lg font-medium transition-colors">
                                <i class="fas fa-save mr-2"></i>Save SEO Settings
                            </button>
                        </div>

                        <div class="space-y-8">
                            <!-- Page Titles -->
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Home Page Titles</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">English
                                            Title</label>
                                        <input type="text" id="homeTitleEn"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="iGrab - Premium Coffee Experience">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Arabic
                                            Title</label>
                                        <input type="text" id="homeTitleAr" dir="rtl"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="آي جراب - تجربة قهوة مميزة">
                                    </div>
                                </div>
                            </div>

                            <!-- Meta Descriptions -->
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Meta Descriptions</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">English
                                            Description</label>
                                        <textarea id="metaDescEn" rows="3"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="Order premium coffee online from iGrab..."></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Arabic
                                            Description</label>
                                        <textarea id="metaDescAr" rows="3" dir="rtl"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="اطلب قهوة مميزة عبر الإنترنت من آي جراب..."></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Meta Keywords -->
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900 mb-4">Meta Keywords</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">English
                                            Keywords</label>
                                        <input type="text" id="metaKeywordsEn"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="coffee, dubai, delivery, cafe">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-700 mb-2">Arabic
                                            Keywords</label>
                                        <input type="text" id="metaKeywordsAr" dir="rtl"
                                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                            placeholder="قهوة، دبي، توصيل، مقهى">
                                    </div>
                                </div>
                            </div>

                            <!-- File Uploads -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Favicon -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Favicon</label>
                                    <div class="file-upload-area" id="faviconUploadArea">
                                        <input type="file" id="faviconInput" accept=".ico,.png" class="hidden">
                                        <div id="faviconPreview" class="hidden">
                                            <img id="faviconImage" class="w-8 h-8 mx-auto mb-2">
                                            <button type="button" class="text-red-600 hover:text-red-800 text-sm"
                                                onclick="removeFavicon()">
                                                <i class="fas fa-trash mr-1"></i>Remove
                                            </button>
                                        </div>
                                        <div id="faviconPlaceholder">
                                            <i class="fas fa-globe text-2xl text-gray-400 mb-2"></i>
                                            <p class="text-gray-600 font-medium">Upload Favicon</p>
                                            <p class="text-gray-500 text-sm">ICO, PNG 16x16 or 32x32</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- OG Image -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Social Sharing Image
                                        (OG Image)</label>
                                    <div class="file-upload-area" id="ogImageUploadArea">
                                        <input type="file" id="ogImageInput" accept="image/*" class="hidden">
                                        <div id="ogImagePreview" class="hidden">
                                            <img id="ogImageImage" class="max-w-24 max-h-16 mx-auto rounded mb-2">
                                            <button type="button" class="text-red-600 hover:text-red-800 text-sm"
                                                onclick="removeOgImage()">
                                                <i class="fas fa-trash mr-1"></i>Remove
                                            </button>
                                        </div>
                                        <div id="ogImagePlaceholder">
                                            <i class="fas fa-share-alt text-2xl text-gray-400 mb-2"></i>
                                            <p class="text-gray-600 font-medium">Upload OG Image</p>
                                            <p class="text-gray-500 text-sm">1200x630px recommended</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charges Tab -->
                <div id="charges-tab" class="tab-content hidden">
                    <div class="settings-card bg-white rounded-lg shadow-sm border fade-in">
                        <div class="flex justify-between items-center p-6 border-b">
                            <h2 class="text-2xl font-bold text-gray-900">Charges Management</h2>
                            <button id="addChargeBtn"
                                class="brand-teal hover:brand-teal-light text-white px-6 py-2 rounded-lg font-medium transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add Charge
                            </button>
                        </div>

                        <!-- Charges List -->
                        <div id="chargesContainer" class="p-6">
                            <!-- Loading State -->
                            <div id="chargesLoading" class="hidden flex justify-center py-8">
                                <div class="loading-spinner"></div>
                            </div>

                            <!-- Charges will be populated here -->
                            <div id="chargesList"></div>
                        </div>
                    </div>
                </div>

                <!-- System Info Tab -->
                <div id="system-tab" class="tab-content hidden">
                    <div class="settings-card bg-white rounded-lg shadow-sm border p-6 fade-in">
                        <h2 class="text-2xl font-bold text-gray-900 mb-6">System Information</h2>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="systemInfo">
                            <!-- System info will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Branch Modal -->
        <div id="branchModal" class="modal">
            <div class="modal-content">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-900" id="branchModalTitle">Add New Branch</h3>
                    <button type="button" class="text-gray-500 hover:text-gray-700 p-2"
                        onclick="closeModal('branchModal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="branchForm">
                    <div class="space-y-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Branch Name *</label>
                                <input type="text" id="branchName" required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                    placeholder="Downtown Dubai Branch">
                            </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">Phone Number *</label>
                                <input type="tel" id="branchPhone" required
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                    placeholder="+971 50 123 4567">
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address</label>
                            <input type="email" id="branchEmail"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                placeholder="branch@igrab.com">
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Address *</label>
                            <textarea id="branchAddress" rows="3" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                placeholder="Full branch address"></textarea>
                        </div>

                        <!-- Operating Hours -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-3">Operating Hours</label>
                            <div id="operatingHours" class="space-y-2">
                                <!-- Days will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeModal('branchModal')"
                                class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                Cancel
                            </button>
                            <button type="submit"
                                class="px-6 py-3 brand-teal text-white rounded-lg hover:brand-teal-light transition-colors">
                                <span class="btn-text">Save Branch</span>
                                <span class="btn-loading hidden">
                                    <div class="loading-spinner"></div>
                                </span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Charge Modal -->
        <div id="chargeModal" class="modal">
            <div class="modal-content max-w-md">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-gray-900" id="chargeModalTitle">Add New Charge</h3>
                    <button type="button" class="text-gray-500 hover:text-gray-700 p-2"
                        onclick="closeModal('chargeModal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form id="chargeForm">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Charge Name *</label>
                            <input type="text" id="chargeName" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                placeholder="Service Fee">
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Charge Type *</label>
                            <select id="chargeType" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent">
                                <option value="">Select charge type</option>
                                <option value="percentage">Percentage (%)</option>
                                <option value="number">Fixed Amount (AED)</option>
                            </select>
                        </div>

                        <div>
                            <label class="block text-sm font-semibold text-gray-700 mb-2">Charge Value *</label>
                            <div class="relative">
                                <input type="number" id="chargeValue" required step="0.01" min="0"
                                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"
                                    placeholder="5.00">
                                <span id="chargeUnit" class="absolute right-3 top-3 text-gray-500">AED</span>
                            </div>
                        </div>

                        <div class="flex justify-end space-x-3 pt-4 border-t">
                            <button type="button" onclick="closeModal('chargeModal')"
                                class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                Cancel
                            </button>
                            <button type="submit"
                                class="px-6 py-3 brand-teal text-white rounded-lg hover:brand-teal-light transition-colors">
                                <span class="btn-text">Save Charge</span>
                                <span class="btn-loading hidden">
                                    <div class="loading-spinner"></div>
                                </span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="deleteModal" class="modal">
            <div class="modal-content max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-red-800">Confirm Deletion</h3>
                    <button type="button" class="text-gray-500 hover:text-gray-700 p-2"
                        onclick="closeModal('deleteModal')">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <div class="flex items-center space-x-3 p-4 bg-red-50 rounded-lg">
                        <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
                        <div>
                            <h4 class="font-semibold text-red-800">Are you sure?</h4>
                            <p class="text-sm text-red-700">This action cannot be undone.</p>
                        </div>
                    </div>
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <p class="text-sm text-gray-700 mb-2">Item details:</p>
                        <div id="deleteItemDetails" class="text-sm font-medium text-gray-900">
                            <!-- Item details will be populated -->
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeModal('deleteModal')"
                            class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                            Cancel
                        </button>
                        <button type="button" id="confirmDeleteBtn"
                            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                            <span class="btn-text">Delete</span>
                            <span class="btn-loading hidden">
                                <div class="loading-spinner"></div>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toastContainer"></div>

        <script>
            // API Configuration
            const API_BASE_URL = '/api';

            // Global State
            let currentTab = 'business';
            let editingBranchId = null;
            let editingChargeId = null;
            let deleteCallback = null;

            // API Classes
            class SettingsAPI {
                // Business Information
                static async getBusinessInfo() {
                    try {
                        const response = await fetch(`${API_BASE_URL}/settings/business`);
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Get Business Info Error:', error);
                        throw error;
                    }
                }

                static async updateBusinessInfo(data) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/settings/business`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Update Business Info Error:', error);
                        throw error;
                    }
                }

                // File Upload
                static async uploadFile(file, type) {
                    try {
                        const formData = new FormData();
                        formData.append('file', file);
                        formData.append('type', type);

                        const response = await fetch(`${API_BASE_URL}/settings/upload`, {
                            method: 'POST',
                            body: formData,
                            
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Upload File Error:', error);
                        throw error;
                    }
                }

                // Branches
                static async getBranches() {
                    try {
                        const response = await fetch(`${API_BASE_URL}/branches`);
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Get Branches Error:', error);
                        throw error;
                    }
                }

                static async createBranch(data) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/branches`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Create Branch Error:', error);
                        throw error;
                    }
                }

                static async updateBranch(id, data) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/branches/${id}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Update Branch Error:', error);
                        throw error;
                    }
                }

                static async deleteBranch(id) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/branches/${id}`, {
                            method: 'DELETE'
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Delete Branch Error:', error);
                        throw error;
                    }
                }

                // Payment Settings
                static async getPaymentSettings() {
                    try {
                        const response = await fetch(`${API_BASE_URL}/settings/payment`);
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Get Payment Settings Error:', error);
                        throw error;
                    }
                }

                static async updatePaymentSettings(data) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/settings/payment`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Update Payment Settings Error:', error);
                        throw error;
                    }
                }

                // SEO Settings
                static async getSeoSettings() {
                    try {
                        const response = await fetch(`${API_BASE_URL}/settings/seo`);
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Get SEO Settings Error:', error);
                        throw error;
                    }
                }

                static async updateSeoSettings(data) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/settings/seo`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Update SEO Settings Error:', error);
                        throw error;
                    }
                }

                // Charges
                static async getCharges() {
                    try {
                        const response = await fetch(`${API_BASE_URL}/charges`);
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Get Charges Error:', error);
                        throw error;
                    }
                }

                static async createCharge(data) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/charges`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Create Charge Error:', error);
                        throw error;
                    }
                }

                static async updateCharge(id, data) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/charges/${id}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(data)
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Update Charge Error:', error);
                        throw error;
                    }
                }

                static async deleteCharge(id) {
                    try {
                        const response = await fetch(`${API_BASE_URL}/charges/${id}`, {
                            method: 'DELETE'
                        });
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Delete Charge Error:', error);
                        throw error;
                    }
                }

                // System Info
                static async getSystemInfo() {
                    try {
                        const response = await fetch(`${API_BASE_URL}/system/info`);
                        if (!response.ok) throw new Error(`HTTP ${response.status}`);
                        return await response.json();
                    } catch (error) {
                        console.error('Get System Info Error:', error);
                        throw error;
                    }
                }
            }

            // Toast Manager
            class ToastManager {
                static show(message, type = 'success', duration = 3000) {
                    const toast = document.createElement('div');
                    toast.className = `toast ${type}`;
                    toast.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-exclamation-triangle'} mr-2"></i>
                        <span>${message}</span>
                    </div>
                `;

                    document.getElementById('toastContainer').appendChild(toast);
                    setTimeout(() => toast.classList.add('show'), 100);

                    setTimeout(() => {
                        toast.classList.remove('show');
                        setTimeout(() => toast.remove(), 300);
                    }, duration);
                }
            }

            // Tab Management
            function switchTab(tabName) {
                // Update tab buttons
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // Update tab content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                document.getElementById(`${tabName}-tab`).classList.remove('hidden');

                currentTab = tabName;

                // Load data for specific tabs
                switch (tabName) {
                    case 'business':
                        loadBusinessInfo();
                        break;
                    case 'branches':
                        loadBranches();
                        break;
                    case 'payments':
                        loadPaymentSettings();
                        break;
                    case 'seo':
                        loadSeoSettings();
                        break;
                    case 'charges':
                        loadCharges();
                        break;
                    case 'system':
                        loadSystemInfo();
                        break;
                }
            }

            // Modal Management
            function openModal(modalId) {
                document.getElementById(modalId).classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            function closeModal(modalId) {
                document.getElementById(modalId).classList.remove('show');
                document.body.style.overflow = 'auto';

                if (modalId === 'branchModal') {
                    resetBranchForm();
                } else if (modalId === 'chargeModal') {
                    resetChargeForm();
                }
            }

            // File Upload Handlers
            function setupFileUpload(inputId, areaId, previewId, placeholderId, callback) {
                const input = document.getElementById(inputId);
                const area = document.getElementById(areaId);
                const preview = document.getElementById(previewId);
                const placeholder = document.getElementById(placeholderId);

                area.addEventListener('click', () => input.click());
                area.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    area.classList.add('border-teal-500', 'bg-teal-50');
                });
                area.addEventListener('dragleave', () => {
                    area.classList.remove('border-teal-500', 'bg-teal-50');
                });
                area.addEventListener('drop', (e) => {
                    e.preventDefault();
                    area.classList.remove('border-teal-500', 'bg-teal-50');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        handleFileSelect(files[0], inputId, areaId, previewId, placeholderId, callback);
                    }
                });

                input.addEventListener('change', (e) => {
                    if (e.target.files.length > 0) {
                        handleFileSelect(e.target.files[0], inputId, areaId, previewId, placeholderId, callback);
                    }
                });
            }

            function handleFileSelect(file, inputId, areaId, previewId, placeholderId, callback) {
                const maxSize = 2 * 1024 * 1024; // 2MB
                if (file.size > maxSize) {
                    ToastManager.show('File size must be less than 2MB', 'error');
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    const area = document.getElementById(areaId);
                    const preview = document.getElementById(previewId);
                    const placeholder = document.getElementById(placeholderId);
                    const img = preview.querySelector('img');

                    img.src = e.target.result;
                    area.classList.add('has-file');
                    preview.classList.remove('hidden');
                    placeholder.style.display = 'none';

                    if (callback) callback(file);
                };
                reader.readAsDataURL(file);
            }

            // Business Information Functions
            async function loadBusinessInfo() {
                try {
                    // Mock data for demo
                    const mockData = {
                        success: true,
                        data: {
                            businessName: "iGrab Cafe",
                            logo: "",
                            aboutUs: "Premium coffee experience with fresh ingredients and excellent service.",
                            phone: "+971501234567",
                            email: "info@igrab.com",
                            currency: "AED",
                            address: {
                                street: "Sheikh Zayed Road",
                                city: "Dubai",
                                country: "UAE",
                                zipCode: "00000"
                            }
                        }
                    };

                    // const data = mockData; // Replace with: await SettingsAPI.getBusinessInfo();
                    const data = await SettingsAPI.getBusinessInfo();

                    // Populate form
                    document.getElementById('businessName').value = data.data.businessName || '';
                    document.getElementById('businessPhone').value = data.data.phone || '';
                    document.getElementById('businessEmail').value = data.data.email || '';
                    document.getElementById('businessAbout').value = data.data.aboutUs || '';
                    document.getElementById('addressStreet').value = data.data.address?.street || '';
                    document.getElementById('addressCity').value = data.data.address?.city || '';
                    document.getElementById('addressCountry').value = data.data.address?.country || '';

                    if (data.data.logo) {
                        // Handle existing logo display
                    }

                } catch (error) {
                    ToastManager.show('Failed to load business information', 'error');
                }
            }

            async function saveBusinessInfo() {
                try {
                    const submitBtn = document.getElementById('saveBusinessBtn');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<div class="loading-spinner mr-2"></div>Saving...';
                    submitBtn.disabled = true;

                    const businessData = {
                        businessName: document.getElementById('businessName').value.trim(),
                        phone: document.getElementById('businessPhone').value.trim(),
                        email: document.getElementById('businessEmail').value.trim(),
                        aboutUs: document.getElementById('businessAbout').value.trim(),
                        address: {
                            street: document.getElementById('addressStreet').value.trim(),
                            city: document.getElementById('addressCity').value.trim(),
                            country: document.getElementById('addressCountry').value.trim()
                        }
                    };

                    // Simulate API call
                    // await new Promise(resolve => setTimeout(resolve, 1500));
                    // // Assuming this code is within a context where 'logoInput' exists in the DOM
                    // const logoInput = document.getElementById('logoInput');

                    // // To get the file:
                    // const file = logoInput.files // Gets the first selected file
                    // await SettingsAPI.uploadFile(file,'logo')
                    await SettingsAPI.updateBusinessInfo(businessData);

                    ToastManager.show('Business information saved successfully!', 'success');

                } catch (error) {
                    ToastManager.show('Failed to save business information: ' + error.message, 'error');
                } finally {
                    const submitBtn = document.getElementById('saveBusinessBtn');
                    submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i>Save Changes';
                    submitBtn.disabled = false;
                }
            }

            // Branch Functions
            async function loadBranches() {
                const container = document.getElementById('branchesList');
                const loading = document.getElementById('branchesLoading');

                loading.classList.remove('hidden');
                container.innerHTML = '';

                try {
                    // Mock data for demo
                    const mockBranches = [
                        {
                            _id: "branch123",
                            name: "Downtown Dubai Branch",
                            address: "Sheikh Zayed Road, Downtown Dubai",
                            phone: "+971501234567",
                            email: "downtown@igrab.com",
                            isActive: true,
                            operatingHours: {
                                monday: { open: "08:00", close: "22:00", isOpen: true },
                                tuesday: { open: "08:00", close: "22:00", isOpen: true },
                                wednesday: { open: "08:00", close: "22:00", isOpen: true },
                                thursday: { open: "08:00", close: "22:00", isOpen: true },
                                friday: { open: "08:00", close: "22:00", isOpen: true },
                                saturday: { open: "08:00", close: "22:00", isOpen: true },
                                sunday: { open: "08:00", close: "22:00", isOpen: true }
                            },
                            createdAt: "2023-11-15T09:20:00Z"
                        },
                        {
                            _id: "branch124",
                            name: "Marina Mall Branch",
                            address: "Dubai Marina Mall, Dubai Marina",
                            phone: "+971507654321",
                            email: "marina@igrab.com",
                            isActive: true,
                            operatingHours: {
                                monday: { open: "10:00", close: "23:00", isOpen: true },
                                tuesday: { open: "10:00", close: "23:00", isOpen: true },
                                wednesday: { open: "10:00", close: "23:00", isOpen: true },
                                thursday: { open: "10:00", close: "23:00", isOpen: true },
                                friday: { open: "10:00", close: "24:00", isOpen: true },
                                saturday: { open: "10:00", close: "24:00", isOpen: true },
                                sunday: { open: "10:00", close: "23:00", isOpen: true }
                            },
                            createdAt: "2023-12-01T14:30:00Z"
                        }
                    ];

                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    // const branches = mockBranches; // Replace with: (await SettingsAPI.getBranches()).data.branches;
                    const branches =  (await SettingsAPI.getBranches()).data.branches;

                    if (branches.length === 0) {
                        container.innerHTML = `
                        <div class="text-center py-12">
                            <i class="fas fa-store text-4xl text-gray-400 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">No branches found</h3>
                            <p class="text-gray-500 mb-4">Start by adding your first branch location.</p>
                            <button onclick="addBranch()" class="brand-teal hover:brand-teal-light text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add First Branch
                            </button>
                        </div>
                    `;
                    } else {
                        container.innerHTML = branches.map(branch => `
                        <div class="border rounded-lg p-4 mb-4 hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-start mb-3">
                                <div class="flex-1">
                                    <div class="flex items-center mb-2">
                                        <h3 class="text-lg font-semibold text-gray-900 mr-3">${branch.name}</h3>
                                        <span class="status-badge ${branch.isActive ? 'status-active' : 'status-disabled'}">
                                            ${branch.isActive ? 'Active' : 'Inactive'}
                                        </span>
                                    </div>
                                    <p class="text-gray-600 mb-1"><i class="fas fa-map-marker-alt mr-2"></i>${branch.address}</p>
                                    <p class="text-gray-600 mb-1"><i class="fas fa-phone mr-2"></i>${branch.phone}</p>
                                    ${branch.email ? `<p class="text-gray-600"><i class="fas fa-envelope mr-2"></i>${branch.email || 'NA'}</p>` : ''}
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="editBranch('${branch._id}')" class="text-blue-600 hover:text-blue-800 p-2">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteBranch('${branch._id}', '${branch.name}')" class="text-red-600 hover:text-red-800 p-2">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                          
                        </div>
                    `).join('');
                    }

                } catch (error) {
                    container.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-lg font-semibold text-red-800 mb-2">Failed to load branches</h3>
                        <p class="text-red-600 mb-4">${error.message}</p>
                        <button onclick="loadBranches()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-redo mr-2"></i>Retry
                        </button>
                    </div>
                `;
                } finally {
                    loading.classList.add('hidden');
                }
            }

            function addBranch() {
                editingBranchId = null;
                document.getElementById('branchModalTitle').textContent = 'Add New Branch';
                document.querySelector('#branchForm button[type="submit"] .btn-text').textContent = 'Save Branch';
                resetBranchForm();
                setupOperatingHours();
                openModal('branchModal');
            }

            function editBranch(branchId) {
                // In real implementation, fetch branch data and populate form
                editingBranchId = branchId;
                document.getElementById('branchModalTitle').textContent = 'Edit Branch';
                document.querySelector('#branchForm button[type="submit"] .btn-text').textContent = 'Update Branch';

                // Mock data population
                document.getElementById('branchName').value = 'Downtown Dubai Branch';
                document.getElementById('branchPhone').value = '+971501234567';
                document.getElementById('branchEmail').value = 'downtown@igrab.com';
                document.getElementById('branchAddress').value = 'Sheikh Zayed Road, Downtown Dubai';

                // setupOperatingHours();
                // setupOperatingHours();
                
                openModal('branchModal');
            }

            function deleteBranch(branchId, branchName) {
                document.getElementById('deleteItemDetails').innerHTML = `
                <div><strong>Branch:</strong> ${branchName}</div>
                <div><strong>ID:</strong> ${branchId}</div>
            `;

                deleteCallback = async () => {
                    try {
                        await SettingsAPI.deleteBranch(branchId);
                        ToastManager.show('Branch deleted successfully', 'success');
                        loadBranches();
                    } catch (error) {
                        ToastManager.show('Failed to delete branch: ' + error.message, 'error');
                    }
                };

                openModal('deleteModal');
            }

            function resetBranchForm() {
                document.getElementById('branchForm').reset();
                editingBranchId = null;
            }

            function setupOperatingHours() {
                const container = document.getElementById('operatingHours');
                const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];

                container.innerHTML = days.map(day => `
                <div class="day-schedule flex items-center justify-between">
                    <div class="flex items-center w-24">
                        <input type="checkbox" id="${day}Open" checked class="mr-2">
                        <label class="font-medium capitalize text-sm">${day}</label>
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="time" id="${day}Start" value="08:00" class="px-2 py-1 border rounded text-sm">
                        <span class="text-gray-500">to</span>
                        <input type="time" id="${day}End" value="22:00" class="px-2 py-1 border rounded text-sm">
                    </div>
                </div>
            `).join('');

                // Add event listeners for day toggles
                days.forEach(day => {
                    const checkbox = document.getElementById(`${day}Open`);
                    const startTime = document.getElementById(`${day}Start`);
                    const endTime = document.getElementById(`${day}End`);
                    const schedule = checkbox.closest('.day-schedule');

                    checkbox.addEventListener('change', () => {
                        startTime.disabled = !checkbox.checked;
                        endTime.disabled = !checkbox.checked;
                        if (checkbox.checked) {
                            schedule.classList.remove('closed');
                        } else {
                            schedule.classList.add('closed');
                        }
                    });
                });
            }

            // Payment Settings Functions
            async function loadPaymentSettings() {
                try {
                    // Mock data for demo
                    const mockData = {
                        success: true,
                        data: {
                            stripe: {
                                publishableKey: "pk_test_...",
                                secretKey: "sk_test_...",
                                isEnabled: false
                            },
                            cod: {
                                isEnabled: true
                            },
                            wallet: {
                                isEnabled: false
                            }
                        }
                    };

                    const data = mockData; // Replace with: await SettingsAPI.getPaymentSettings();

                    // Populate Stripe settings
                    document.getElementById('stripePublishableKey').value = data.data.stripe.publishableKey || '';
                    document.getElementById('stripeSecretKey').value = data.data.stripe.secretKey || '';
                    document.getElementById('stripeToggle').checked = data.data.stripe.isEnabled;
                    updateStripeStatus(data.data.stripe.isEnabled);

                    // Populate COD settings
                    document.getElementById('codToggle').checked = data.data.cod.isEnabled;
                    updateCodStatus(data.data.cod.isEnabled);

                } catch (error) {
                    ToastManager.show('Failed to load payment settings', 'error');
                }
            }

            function updateStripeStatus(isEnabled) {
                const statusBadge = document.getElementById('stripeStatus');
                if (isEnabled) {
                    statusBadge.textContent = 'Active';
                    statusBadge.className = 'status-badge status-active';
                } else {
                    statusBadge.textContent = 'Disabled';
                    statusBadge.className = 'status-badge status-disabled';
                }
            }

            function updateCodStatus(isEnabled) {
                const statusBadge = document.getElementById('codStatus');
                if (isEnabled) {
                    statusBadge.textContent = 'Active';
                    statusBadge.className = 'status-badge status-active';
                } else {
                    statusBadge.textContent = 'Disabled';
                    statusBadge.className = 'status-badge status-disabled';
                }
            }

            async function savePaymentSettings() {
                try {
                    const submitBtn = document.getElementById('savePaymentBtn');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<div class="loading-spinner mr-2"></div>Saving...';
                    submitBtn.disabled = true;

                    const paymentData = {
                        stripe: {
                            publishableKey: document.getElementById('stripePublishableKey').value.trim(),
                            secretKey: document.getElementById('stripeSecretKey').value.trim(),
                            isEnabled: document.getElementById('stripeToggle').checked
                        },
                        cod: {
                            isEnabled: document.getElementById('codToggle').checked
                        }
                    };

                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    // await SettingsAPI.updatePaymentSettings(paymentData);

                    ToastManager.show('Payment settings saved successfully!', 'success');

                } catch (error) {
                    ToastManager.show('Failed to save payment settings: ' + error.message, 'error');
                } finally {
                    const submitBtn = document.getElementById('savePaymentBtn');
                    submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i>Save Payment Settings';
                    submitBtn.disabled = false;
                }
            }

            // SEO Settings Functions
            async function loadSeoSettings() {
                try {
                    // Mock data for demo
                    const mockData = {
                        success: true,
                        data: {
                            homeTitle: {
                                en: "iGrab - Premium Coffee Experience",
                                ar: "آي جراب - تجربة قهوة مميزة"
                            },
                            metaDescription: {
                                en: "Order premium coffee online from iGrab. Fresh ingredients, excellent service, fast delivery across Dubai.",
                                ar: "اطلب قهوة مميزة عبر الإنترنت من آي جراب. مكونات طازجة، خدمة ممتازة، توصيل سريع في دبي."
                            },
                            metaKeywords: {
                                en: "coffee, dubai, delivery, cafe, premium",
                                ar: "قهوة، دبي، توصيل، مقهى، مميز"
                            },
                            favicon: "",
                            ogImage: ""
                        }
                    };

                    const data = mockData; // Replace with: await SettingsAPI.getSeoSettings();

                    // Populate SEO fields
                    document.getElementById('homeTitleEn').value = data.data.homeTitle.en || '';
                    document.getElementById('homeTitleAr').value = data.data.homeTitle.ar || '';
                    document.getElementById('metaDescEn').value = data.data.metaDescription.en || '';
                    document.getElementById('metaDescAr').value = data.data.metaDescription.ar || '';
                    document.getElementById('metaKeywordsEn').value = data.data.metaKeywords.en || '';
                    document.getElementById('metaKeywordsAr').value = data.data.metaKeywords.ar || '';

                } catch (error) {
                    ToastManager.show('Failed to load SEO settings', 'error');
                }
            }

            async function saveSeoSettings() {
                try {
                    const submitBtn = document.getElementById('saveSeoBtn');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<div class="loading-spinner mr-2"></div>Saving...';
                    submitBtn.disabled = true;

                    const seoData = {
                        homeTitle: {
                            en: document.getElementById('homeTitleEn').value.trim(),
                            ar: document.getElementById('homeTitleAr').value.trim()
                        },
                        metaDescription: {
                            en: document.getElementById('metaDescEn').value.trim(),
                            ar: document.getElementById('metaDescAr').value.trim()
                        },
                        metaKeywords: {
                            en: document.getElementById('metaKeywordsEn').value.trim(),
                            ar: document.getElementById('metaKeywordsAr').value.trim()
                        }
                    };

                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    // await SettingsAPI.updateSeoSettings(seoData);

                    ToastManager.show('SEO settings saved successfully!', 'success');

                } catch (error) {
                    ToastManager.show('Failed to save SEO settings: ' + error.message, 'error');
                } finally {
                    const submitBtn = document.getElementById('saveSeoBtn');
                    submitBtn.innerHTML = '<i class="fas fa-save mr-2"></i>Save SEO Settings';
                    submitBtn.disabled = false;
                }
            }

            // Charges Functions
            async function loadCharges() {
                const container = document.getElementById('chargesList');
                const loading = document.getElementById('chargesLoading');

                loading.classList.remove('hidden');
                container.innerHTML = '';

                try {
                    // Mock data for demo
                    const mockCharges = [
                        {
                            _id: "charge123",
                            name: "Service Fee",
                            type: {
                                name: "percentage",
                                value: 5
                            }
                        },
                        {
                            _id: "charge124",
                            name: "Delivery Fee",
                            type: {
                                name: "number",
                                value: 15
                            }
                        },
                        {
                            _id: "charge125",
                            name: "Processing Fee",
                            type: {
                                name: "percentage",
                                value: 2.5
                            }
                        }
                    ];

                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    const charges = mockCharges; // Replace with: (await SettingsAPI.getCharges()).data.charges;

                    if (charges.length === 0) {
                        container.innerHTML = `
                        <div class="text-center py-12">
                            <i class="fas fa-receipt text-4xl text-gray-400 mb-4"></i>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">No charges configured</h3>
                            <p class="text-gray-500 mb-4">Start by adding your first charge or fee.</p>
                            <button onclick="addCharge()" class="brand-teal hover:brand-teal-light text-white px-4 py-2 rounded-lg transition-colors">
                                <i class="fas fa-plus mr-2"></i>Add First Charge
                            </button>
                        </div>
                    `;
                    } else {
                        container.innerHTML = charges.map(charge => `
                        <div class="border rounded-lg p-4 mb-4 hover:shadow-lg transition-shadow">
                            <div class="flex justify-between items-center">
                                <div class="flex-1">
                                    <h3 class="text-lg font-semibold text-gray-900">${charge.name}</h3>
                                    <div class="flex items-center mt-2">
                                        <span class="text-2xl font-bold text-teal-600">
                                            ${charge.type.value}${charge.type.name === 'percentage' ? '%' : ' AED'}
                                        </span>
                                        <span class="ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full">
                                            ${charge.type.name === 'percentage' ? 'Percentage' : 'Fixed Amount'}
                                        </span>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="editCharge('${charge._id}')" class="text-blue-600 hover:text-blue-800 p-2">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button onclick="deleteCharge('${charge._id}', '${charge.name}')" class="text-red-600 hover:text-red-800 p-2">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    }

                } catch (error) {
                    container.innerHTML = `
                    <div class="text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-lg font-semibold text-red-800 mb-2">Failed to load charges</h3>
                        <p class="text-red-600 mb-4">${error.message}</p>
                        <button onclick="loadCharges()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                            <i class="fas fa-redo mr-2"></i>Retry
                        </button>
                    </div>
                `;
                } finally {
                    loading.classList.add('hidden');
                }
            }

            function addCharge() {
                editingChargeId = null;
                document.getElementById('chargeModalTitle').textContent = 'Add New Charge';
                document.querySelector('#chargeForm button[type="submit"] .btn-text').textContent = 'Save Charge';
                resetChargeForm();
                openModal('chargeModal');
            }

            function editCharge(chargeId) {
                // In real implementation, fetch charge data and populate form
                editingChargeId = chargeId;
                document.getElementById('chargeModalTitle').textContent = 'Edit Charge';
                document.querySelector('#chargeForm button[type="submit"] .btn-text').textContent = 'Update Charge';

                // Mock data population
                document.getElementById('chargeName').value = 'Service Fee';
                document.getElementById('chargeType').value = 'percentage';
                document.getElementById('chargeValue').value = '5';
                updateChargeUnit();

                openModal('chargeModal');
            }

            function deleteCharge(chargeId, chargeName) {
                document.getElementById('deleteItemDetails').innerHTML = `
                <div><strong>Charge:</strong> ${chargeName}</div>
                <div><strong>ID:</strong> ${chargeId}</div>
            `;

                deleteCallback = async () => {
                    try {
                        await SettingsAPI.deleteCharge(chargeId);
                        ToastManager.show('Charge deleted successfully', 'success');
                        loadCharges();
                    } catch (error) {
                        ToastManager.show('Failed to delete charge: ' + error.message, 'error');
                    }
                };

                openModal('deleteModal');
            }

            function resetChargeForm() {
                document.getElementById('chargeForm').reset();
                editingChargeId = null;
                updateChargeUnit();
            }

            function updateChargeUnit() {
                const chargeType = document.getElementById('chargeType').value;
                const chargeUnit = document.getElementById('chargeUnit');

                if (chargeType === 'percentage') {
                    chargeUnit.textContent = '%';
                } else {
                    chargeUnit.textContent = 'AED';
                }
            }

            // System Info Functions
            async function loadSystemInfo() {
                const container = document.getElementById('systemInfo');

                try {
                    // Mock data for demo
                    const mockData = {
                        success: true,
                        data: {
                            appVersion: "1.2.3",
                            apiEndpoint: "https://api.igrab.com",
                            environment: "production",
                            uptime: "15 days, 4 hours",
                            lastUpdated: "2023-12-15T10:30:00Z"
                        }
                    };

                    const data = mockData; // Replace with: await SettingsAPI.getSystemInfo();

                    container.innerHTML = `
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Application Information</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">App Version:</span>
                                <span class="font-medium">${data.data.appVersion}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Environment:</span>
                                <span class="font-medium capitalize">${data.data.environment}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">API Endpoint:</span>
                                <span class="font-medium">${data.data.apiEndpoint}</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">System Status</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-gray-600">System Uptime:</span>
                                <span class="font-medium">${data.data.uptime}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Last Updated:</span>
                                <span class="font-medium">${new Date(data.data.lastUpdated).toLocaleDateString()}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">System Status:</span>
                                <span class="status-badge status-active">Operational</span>
                            </div>
                        </div>
                    </div>
                `;

                } catch (error) {
                    container.innerHTML = `
                    <div class="col-span-2 text-center py-12">
                        <i class="fas fa-exclamation-triangle text-4xl text-red-500 mb-4"></i>
                        <h3 class="text-lg font-semibold text-red-800 mb-2">Failed to load system information</h3>
                        <p class="text-red-600">${error.message}</p>
                    </div>
                `;
                }
            }

            // File removal functions
            function removeLogo() {
                const area = document.getElementById('logoUploadArea');
                const preview = document.getElementById('logoPreview');
                const placeholder = document.getElementById('logoPlaceholder');

                area.classList.remove('has-file');
                preview.classList.add('hidden');
                placeholder.style.display = 'block';
                document.getElementById('logoInput').value = '';
            }

            function removeFavicon() {
                const area = document.getElementById('faviconUploadArea');
                const preview = document.getElementById('faviconPreview');
                const placeholder = document.getElementById('faviconPlaceholder');

                area.classList.remove('has-file');
                preview.classList.add('hidden');
                placeholder.style.display = 'block';
                document.getElementById('faviconInput').value = '';
            }

            function removeOgImage() {
                const area = document.getElementById('ogImageUploadArea');
                const preview = document.getElementById('ogImagePreview');
                const placeholder = document.getElementById('ogImagePlaceholder');

                area.classList.remove('has-file');
                preview.classList.add('hidden');
                placeholder.style.display = 'block';
                document.getElementById('ogImageInput').value = '';
            }

            // Initialize page
            document.addEventListener('DOMContentLoaded', function () {
                // Setup tab navigation
                document.querySelectorAll('.tab-button').forEach(button => {
                    button.addEventListener('click', () => {
                        switchTab(button.dataset.tab);
                    });
                });

                // Setup payment toggles
                document.getElementById('stripeToggle').addEventListener('change', (e) => {
                    updateStripeStatus(e.target.checked);
                });

                document.getElementById('codToggle').addEventListener('change', (e) => {
                    updateCodStatus(e.target.checked);
                });

                // Setup charge type selector
                document.getElementById('chargeType').addEventListener('change', updateChargeUnit);

                // Setup file uploads
                setupFileUpload('logoInput', 'logoUploadArea', 'logoPreview', 'logoPlaceholder');
                setupFileUpload('faviconInput', 'faviconUploadArea', 'faviconPreview', 'faviconPlaceholder');
                setupFileUpload('ogImageInput', 'ogImageUploadArea', 'ogImagePreview', 'ogImagePlaceholder');

                // Setup form submissions
                document.getElementById('saveBusinessBtn').addEventListener('click', saveBusinessInfo);
                document.getElementById('savePaymentBtn').addEventListener('click', savePaymentSettings);
                document.getElementById('saveSeoBtn').addEventListener('click', saveSeoSettings);
                document.getElementById('addBranchBtn').addEventListener('click', addBranch);
                document.getElementById('addChargeBtn').addEventListener('click', addCharge);

                // Setup branch form submission
                document.getElementById('branchForm').addEventListener('submit', async function (e) {
                    e.preventDefault();

                    try {
                        const submitBtn = this.querySelector('button[type="submit"]');
                        const btnText = submitBtn.querySelector('.btn-text');
                        const btnLoading = submitBtn.querySelector('.btn-loading');

                        btnText.classList.add('hidden');
                        btnLoading.classList.remove('hidden');
                        submitBtn.disabled = true;

                        // Collect operating hours
                        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
                        const operatingHours = {};
                        days.forEach(day => {
                            operatingHours[day] = {
                                isOpen: document.getElementById(`${day}Open`).checked,
                                open: document.getElementById(`${day}Start`).value,
                                close: document.getElementById(`${day}End`).value
                            };
                        });

                        const branchData = {
                            name: document.getElementById('branchName').value.trim(),
                            phone: document.getElementById('branchPhone').value.trim(),
                            email: document.getElementById('branchEmail').value.trim(),
                            address: document.getElementById('branchAddress').value.trim(),
                            operatingHours: operatingHours
                        };

                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 1500));

                        if (editingBranchId) {
                            // await SettingsAPI.updateBranch(editingBranchId, branchData);
                            ToastManager.show('Branch updated successfully!', 'success');
                        } else {
                            // await SettingsAPI.createBranch(branchData);
                            ToastManager.show('Branch created successfully!', 'success');
                        }

                        closeModal('branchModal');
                        loadBranches();

                    } catch (error) {
                        ToastManager.show('Failed to save branch: ' + error.message, 'error');
                    } finally {
                        const submitBtn = this.querySelector('button[type="submit"]');
                        const btnText = submitBtn.querySelector('.btn-text');
                        const btnLoading = submitBtn.querySelector('.btn-loading');

                        btnText.classList.remove('hidden');
                        btnLoading.classList.add('hidden');
                        submitBtn.disabled = false;
                    }
                });

                // Setup charge form submission
                document.getElementById('chargeForm').addEventListener('submit', async function (e) {
                    e.preventDefault();

                    try {
                        const submitBtn = this.querySelector('button[type="submit"]');
                        const btnText = submitBtn.querySelector('.btn-text');
                        const btnLoading = submitBtn.querySelector('.btn-loading');

                        btnText.classList.add('hidden');
                        btnLoading.classList.remove('hidden');
                        submitBtn.disabled = true;

                        const chargeData = {
                            name: document.getElementById('chargeName').value.trim(),
                            type: {
                                name: document.getElementById('chargeType').value,
                                value: parseFloat(document.getElementById('chargeValue').value)
                            }
                        };

                        // Simulate API call
                        await new Promise(resolve => setTimeout(resolve, 1500));

                        if (editingChargeId) {
                            // await SettingsAPI.updateCharge(editingChargeId, chargeData);
                            ToastManager.show('Charge updated successfully!', 'success');
                        } else {
                            // await SettingsAPI.createCharge(chargeData);
                            ToastManager.show('Charge created successfully!', 'success');
                        }

                        closeModal('chargeModal');
                        loadCharges();

                    } catch (error) {
                        ToastManager.show('Failed to save charge: ' + error.message, 'error');
                    } finally {
                        const submitBtn = this.querySelector('button[type="submit"]');
                        const btnText = submitBtn.querySelector('.btn-text');
                        const btnLoading = submitBtn.querySelector('.btn-loading');

                        btnText.classList.remove('hidden');
                        btnLoading.classList.add('hidden');
                        submitBtn.disabled = false;
                    }
                });

                // Setup delete confirmation
                document.getElementById('confirmDeleteBtn').addEventListener('click', async function () {
                    if (deleteCallback) {
                        try {
                            const submitBtn = this;
                            const btnText = submitBtn.querySelector('.btn-text');
                            const btnLoading = submitBtn.querySelector('.btn-loading');

                            btnText.classList.add('hidden');
                            btnLoading.classList.remove('hidden');
                            submitBtn.disabled = true;

                            await deleteCallback();
                            closeModal('deleteModal');

                        } catch (error) {
                            ToastManager.show('Delete operation failed: ' + error.message, 'error');
                        } finally {
                            const submitBtn = this;
                            const btnText = submitBtn.querySelector('.btn-text');
                            const btnLoading = submitBtn.querySelector('.btn-loading');

                            btnText.classList.remove('hidden');
                            btnLoading.classList.add('hidden');
                            submitBtn.disabled = false;
                        }
                    }
                });

                // Setup modal close on backdrop click
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', function (e) {
                        if (e.target === this) {
                            closeModal(this.id);
                        }
                    });
                });

                // Setup keyboard shortcuts
                document.addEventListener('keydown', function (e) {
                    if (e.key === 'Escape') {
                        const openModal = document.querySelector('.modal.show');
                        if (openModal) {
                            closeModal(openModal.id);
                        }
                    }
                });

                // Setup back button
                document.getElementById('backBtn').addEventListener('click', () => {
                    window.history.back();
                });

                // Load initial data
                loadBusinessInfo();
            });

            // Global functions for onclick handlers
            window.switchTab = switchTab;
            window.openModal = openModal;
            window.closeModal = closeModal;
            window.addBranch = addBranch;
            window.editBranch = editBranch;
            window.deleteBranch = deleteBranch;
            window.addCharge = addCharge;
            window.editCharge = editCharge;
            window.deleteCharge = deleteCharge;
            window.removeLogo = removeLogo;
            window.removeFavicon = removeFavicon;
            window.removeOgImage = removeOgImage;
        </script>
        <%- include('../../partials/Footer') %>